/**
 * Menubar with support for ARIA properties 
 * Requires jQuery 1.7
 * @author Anton Ball
 */
 (function(a){var b="radio",c="checkbox",d="menu",e="data-menurequired",f="aria-pressed",g={defaultClass:"menuDefault"};a.fn.menubar=function(h){return h=a.extend({},g,h),this.each(function(){var g=a(this),i=a(".btn",g),j=g.attr("data-menu")||d,k=j===c,l=j===b,m=g.attr(e)?g.attr(e)==="true":l;g.attr({role:"menubar","aria-multiselectable":j===c});if(l||k)i.attr(f,!1),l?a("."+h.defaultClass,g).eq(0).attr(f,!0):a("."+h.defaultClass,g).attr(f,!0);i.on("keydown",function(b){var c=a(this,g).index(),d=i.length;if(b.which===39)c=(c+=1)<d?c:0;else{if(b.which!==37)return;c=(c-=1)>=0?c:d-1}i.eq(c).focus()}),i.on("click",function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr(f)!=="false",e={};if(c.attr("aria-disabled")==="true")return;if(l){if(m&&d)return;a('[aria-pressed="true"]',g).attr(f,!1),c.attr(f,!d)}else k&&(c.attr(f,!d),a.extend(e,{selected:!d}));c.trigger(a.Event("select",e))})})}})(jQuery)
